{"ast":null,"code":"'use strict';\n\nconst {\n  kConstruct\n} = require('./symbols');\nconst {\n  Cache\n} = require('./cache');\nconst {\n  webidl\n} = require('../fetch/webidl');\nconst {\n  kEnumerableProperty\n} = require('../core/util');\nclass CacheStorage {\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#dfn-relevant-name-to-cache-map\n   * @type {Map<string, import('./cache').requestResponseList}\n   */\n  #caches = new Map();\n  constructor() {\n    if (arguments[0] !== kConstruct) {\n      webidl.illegalConstructor();\n    }\n  }\n  async match(request) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    webidl.brandCheck(this, CacheStorage);\n    webidl.argumentLengthCheck(arguments, 1, {\n      header: 'CacheStorage.match'\n    });\n    request = webidl.converters.RequestInfo(request);\n    options = webidl.converters.MultiCacheQueryOptions(options);\n\n    // 1.\n    if (options.cacheName != null) {\n      // 1.1.1.1\n      if (this.#caches.has(options.cacheName)) {\n        // 1.1.1.1.1\n        const cacheList = this.#caches.get(options.cacheName);\n        const cache = new Cache(kConstruct, cacheList);\n        return await cache.match(request, options);\n      }\n    } else {\n      // 2.\n      // 2.2\n      for (const cacheList of this.#caches.values()) {\n        const cache = new Cache(kConstruct, cacheList);\n\n        // 2.2.1.2\n        const response = await cache.match(request, options);\n        if (response !== undefined) {\n          return response;\n        }\n      }\n    }\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-has\n   * @param {string} cacheName\n   * @returns {Promise<boolean>}\n   */\n  async has(cacheName) {\n    webidl.brandCheck(this, CacheStorage);\n    webidl.argumentLengthCheck(arguments, 1, {\n      header: 'CacheStorage.has'\n    });\n    cacheName = webidl.converters.DOMString(cacheName);\n\n    // 2.1.1\n    // 2.2\n    return this.#caches.has(cacheName);\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#dom-cachestorage-open\n   * @param {string} cacheName\n   * @returns {Promise<Cache>}\n   */\n  async open(cacheName) {\n    webidl.brandCheck(this, CacheStorage);\n    webidl.argumentLengthCheck(arguments, 1, {\n      header: 'CacheStorage.open'\n    });\n    cacheName = webidl.converters.DOMString(cacheName);\n\n    // 2.1\n    if (this.#caches.has(cacheName)) {\n      // await caches.open('v1') !== await caches.open('v1')\n\n      // 2.1.1\n      const cache = this.#caches.get(cacheName);\n\n      // 2.1.1.1\n      return new Cache(kConstruct, cache);\n    }\n\n    // 2.2\n    const cache = [];\n\n    // 2.3\n    this.#caches.set(cacheName, cache);\n\n    // 2.4\n    return new Cache(kConstruct, cache);\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-delete\n   * @param {string} cacheName\n   * @returns {Promise<boolean>}\n   */\n  async delete(cacheName) {\n    webidl.brandCheck(this, CacheStorage);\n    webidl.argumentLengthCheck(arguments, 1, {\n      header: 'CacheStorage.delete'\n    });\n    cacheName = webidl.converters.DOMString(cacheName);\n    return this.#caches.delete(cacheName);\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-keys\n   * @returns {string[]}\n   */\n  async keys() {\n    webidl.brandCheck(this, CacheStorage);\n\n    // 2.1\n    const keys = this.#caches.keys();\n\n    // 2.2\n    return [...keys];\n  }\n}\nObject.defineProperties(CacheStorage.prototype, {\n  [Symbol.toStringTag]: {\n    value: 'CacheStorage',\n    configurable: true\n  },\n  match: kEnumerableProperty,\n  has: kEnumerableProperty,\n  open: kEnumerableProperty,\n  delete: kEnumerableProperty,\n  keys: kEnumerableProperty\n});\nmodule.exports = {\n  CacheStorage\n};","map":{"version":3,"names":["kConstruct","require","Cache","webidl","kEnumerableProperty","CacheStorage","caches","Map","constructor","arguments","illegalConstructor","match","request","options","length","undefined","brandCheck","argumentLengthCheck","header","converters","RequestInfo","MultiCacheQueryOptions","cacheName","has","cacheList","get","cache","values","response","DOMString","open","set","delete","keys","Object","defineProperties","prototype","Symbol","toStringTag","value","configurable","module","exports"],"sources":["/Users/aluabajzanova/Desktop/skylineÂ /node_modules/undici/lib/cache/cachestorage.js"],"sourcesContent":["'use strict'\n\nconst { kConstruct } = require('./symbols')\nconst { Cache } = require('./cache')\nconst { webidl } = require('../fetch/webidl')\nconst { kEnumerableProperty } = require('../core/util')\n\nclass CacheStorage {\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#dfn-relevant-name-to-cache-map\n   * @type {Map<string, import('./cache').requestResponseList}\n   */\n  #caches = new Map()\n\n  constructor () {\n    if (arguments[0] !== kConstruct) {\n      webidl.illegalConstructor()\n    }\n  }\n\n  async match (request, options = {}) {\n    webidl.brandCheck(this, CacheStorage)\n    webidl.argumentLengthCheck(arguments, 1, { header: 'CacheStorage.match' })\n\n    request = webidl.converters.RequestInfo(request)\n    options = webidl.converters.MultiCacheQueryOptions(options)\n\n    // 1.\n    if (options.cacheName != null) {\n      // 1.1.1.1\n      if (this.#caches.has(options.cacheName)) {\n        // 1.1.1.1.1\n        const cacheList = this.#caches.get(options.cacheName)\n        const cache = new Cache(kConstruct, cacheList)\n\n        return await cache.match(request, options)\n      }\n    } else { // 2.\n      // 2.2\n      for (const cacheList of this.#caches.values()) {\n        const cache = new Cache(kConstruct, cacheList)\n\n        // 2.2.1.2\n        const response = await cache.match(request, options)\n\n        if (response !== undefined) {\n          return response\n        }\n      }\n    }\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-has\n   * @param {string} cacheName\n   * @returns {Promise<boolean>}\n   */\n  async has (cacheName) {\n    webidl.brandCheck(this, CacheStorage)\n    webidl.argumentLengthCheck(arguments, 1, { header: 'CacheStorage.has' })\n\n    cacheName = webidl.converters.DOMString(cacheName)\n\n    // 2.1.1\n    // 2.2\n    return this.#caches.has(cacheName)\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#dom-cachestorage-open\n   * @param {string} cacheName\n   * @returns {Promise<Cache>}\n   */\n  async open (cacheName) {\n    webidl.brandCheck(this, CacheStorage)\n    webidl.argumentLengthCheck(arguments, 1, { header: 'CacheStorage.open' })\n\n    cacheName = webidl.converters.DOMString(cacheName)\n\n    // 2.1\n    if (this.#caches.has(cacheName)) {\n      // await caches.open('v1') !== await caches.open('v1')\n\n      // 2.1.1\n      const cache = this.#caches.get(cacheName)\n\n      // 2.1.1.1\n      return new Cache(kConstruct, cache)\n    }\n\n    // 2.2\n    const cache = []\n\n    // 2.3\n    this.#caches.set(cacheName, cache)\n\n    // 2.4\n    return new Cache(kConstruct, cache)\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-delete\n   * @param {string} cacheName\n   * @returns {Promise<boolean>}\n   */\n  async delete (cacheName) {\n    webidl.brandCheck(this, CacheStorage)\n    webidl.argumentLengthCheck(arguments, 1, { header: 'CacheStorage.delete' })\n\n    cacheName = webidl.converters.DOMString(cacheName)\n\n    return this.#caches.delete(cacheName)\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-keys\n   * @returns {string[]}\n   */\n  async keys () {\n    webidl.brandCheck(this, CacheStorage)\n\n    // 2.1\n    const keys = this.#caches.keys()\n\n    // 2.2\n    return [...keys]\n  }\n}\n\nObject.defineProperties(CacheStorage.prototype, {\n  [Symbol.toStringTag]: {\n    value: 'CacheStorage',\n    configurable: true\n  },\n  match: kEnumerableProperty,\n  has: kEnumerableProperty,\n  open: kEnumerableProperty,\n  delete: kEnumerableProperty,\n  keys: kEnumerableProperty\n})\n\nmodule.exports = {\n  CacheStorage\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}